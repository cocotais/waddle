<a href="https://gitee.com/coco-ag/coco-waddle/tree/master/docs"><p>ğŸ“ ä¿®æ”¹æ–‡æ¡£</p></a>

# Waddle å¼€å‘æ¨¡å¼

## å—å®šä¹‰

å—å®šä¹‰æ–‡ä»¶å‚¨å­˜åœ¨`./static/Waddle/blocks`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶éƒ½å‚¨å­˜ç€ä¸€ä¸ªåŒåå·¥å…·ç®±çš„æ‰€æœ‰å—å®šä¹‰ã€‚

å—å®šä¹‰æè¿°äº†å—çš„å¤–è§‚å’Œè¡Œä¸ºï¼ŒåŒ…æ‹¬æ–‡æœ¬ï¼Œé¢œè‰²ï¼Œå½¢çŠ¶ä»¥åŠå®ƒå¯ä»¥è¿æ¥çš„å…¶ä»–å—ã€‚

å¦‚æœä½ æƒ³çœ‹è‹±æ–‡ç‰ˆåŸæ–‡ï¼Œè¯·ç‚¹[è¿™é‡Œ](https://developers.google.cn/blockly/guides/create-custom-blocks/define-blocks)ã€‚

`init`å‡½æ•°åˆ›å»ºå—çš„å½¢çŠ¶ã€‚åœ¨æ­¤åŠŸèƒ½çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå…³é”®å­—`this`æ˜¯æ­£åœ¨åˆ›å»ºçš„å®é™…å—ã€‚

ç¤ºä¾‹ 1ï¼š

```javascript
Blockly.Blocks['string_length'] = {
    init: function () {
        this.appendValueInput('VALUE').setCheck('String').appendField('length of');
        this.setOutput(true, 'Number');
        this.setColour(160);
        this.setTooltip('Returns number of letters in the provided text.');
        this.setHelpUrl('http://www.w3schools.com/jsref/jsref_length_string.asp');
    }
};
```

---

### å—è¾“å…¥

ä¸€ä¸ªå—æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥ï¼Œå…¶ä¸­æ¯ä¸ªè¾“å…¥éƒ½æ˜¯ä¸€ç³»åˆ—å¯èƒ½ä»¥è¿æ¥ç»“å°¾çš„æ ‡ç­¾å’Œå­—æ®µã€‚æœ‰ä¸‰ç§ç±»å‹çš„è¾“å…¥ï¼Œä¸è¿æ¥ç±»å‹åŒ¹é…ï¼š

- å€¼è¾“å…¥`ValueInput`ï¼šç”¨ä»¥å¡«å……å€¼å—çš„å‡¹æ§½ã€‚
- è¯­å¥è¾“å…¥`StatementInput`ï¼šè¿æ¥åˆ°è¯­å¥å—çš„é¡¶ç«¯è¿æ¥å£ã€‚
- è™šæ‹Ÿè¾“å…¥`DummyInput`ï¼šæ²¡æœ‰å—è¿æ¥ã€‚ä½†å¯ä»¥æ‰§è¡Œå­—æ®µçš„æ“ä½œã€‚

![input](https://developers.google.cn/blockly/images/input-types.png)

å…³äºå€¼è¾“å…¥ä¸è™šæ‹Ÿè¾“å…¥ï¼Œå¯ä»¥å‚è§ä¸Šå›¾ä¸­ internal value input ä¸"while"ã€‚

---

å¯ä»¥ä½¿ç”¨`append`æ–¹æ³•è¿›è¡Œè¾“å…¥ï¼š

ç¤ºä¾‹ 2ï¼š

```javascript
this.appendDummyInput().appendField('for each').appendField('item').appendField(new Blockly.FieldVariable());
this.appendValueInput('LIST').setCheck('Array').setAlign(Blockly.ALIGN_RIGHT).appendField('in list');
this.appendStatementInput('DO').appendField('do');
```

![ç¤ºä¾‹2](https://developers.google.cn/blockly/images/append-input.png)

æ¯ä¸ªæ–¹æ³•éƒ½å¯ä»¥é‡‡ç”¨ä»£ç ç”Ÿæˆå™¨ä½¿ç”¨çš„æ ‡è¯†ç¬¦å­—ç¬¦ä¸²ã€‚è™šæ‹Ÿè¾“å…¥å¾ˆå°‘éœ€è¦å¼•ç”¨ï¼Œå¹¶ä¸”é€šå¸¸ä¸è®¾ç½®æ ‡è¯†ç¬¦ã€‚

å¦‚ä¸Šæ‰€ç¤ºï¼Œæ¯ä¸ªæ–¹æ³•éƒ½è¿”å›è¾“å…¥å¯¹è±¡ï¼Œç”¨æ¥é€šè¿‡æ–¹æ³•é“¾æ¥å¯¹å…¶è¿›è¡Œé…ç½®ã€‚

æœ‰ 3 ä¸ªå‡½æ•°ç”¨äºé…ç½®è¾“å…¥ï¼š`appendField()`ã€`setCheck()` å’Œ `setAlign()`ã€‚

- `appendField`ï¼šä¸€æ—¦åˆ›å»ºäº†è¾“å…¥å¹¶å°†å…¶é™„åŠ åˆ°å¸¦æœ‰ `append_____Input`çš„å—ä¸­ï¼Œå°±å¯ä»¥é€‰æ‹©å°†ä»»æ„æ•°é‡çš„å­—æ®µå åŠ åˆ°è¾“å…¥ä¸­ã€‚ è¿™äº›å­—æ®µé€šå¸¸ç”¨ä½œæ ‡ç­¾æ¥æè¿°æ¯ä¸ªè¾“å…¥çš„ç”¨é€”ã€‚

    ```javascript
    input.appendField('hello');
    ```

    ![hello](https://developers.google.cn/blockly/images/append-field.png)

    ```javascript
    input.appendField('hello').appendField(new Blockly.FieldLabel('Neil', 'person'));
    ```

    ![hello nell](https://developers.google.cn/blockly/images/append-field-label.png)

    blockly å†…ç½®äº† 12 ç§å­—æ®µï¼š

  - [æ•°å­—](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/number)
  - [æ–‡æœ¬è¾“å…¥](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/text-input)
  - [å¤šè¡Œæ–‡æœ¬è¾“å…¥](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/multiline-text-input)
  - [å˜é‡](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/variable)
  - [å›¾åƒ](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/image)
  - [æ ‡ç­¾](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/label)
  - [å¯åºåˆ—åŒ–æ ‡ç­¾](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/label-serializable)
  - [å¤é€‰æ¡†](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/checkbox)
  - [ä¸‹æ‹‰èœå•](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/dropdown)
  - [è§’åº¦é€‰æ‹©å™¨](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/angle)
  - [é¢œè‰²é€‰æ‹©å™¨](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/colour)
  - [æ—¥æœŸé€‰æ‹©å™¨](https://developers.google.cn/blockly/guides/create-custom-blocks/fields/built-in-fields/date)

- `setCheck`ï¼šæ­¤å¯é€‰å‡½æ•°ç”¨äºæ£€æŸ¥è¿æ¥è¾“å…¥çš„ç±»å‹ã€‚ï¼ˆè®¾ç½® null æ—¶ä¸æ£€æŸ¥ï¼‰ã€‚

- `setAlign`ï¼šæ­¤å¯é€‰å‡½æ•°ç”¨äºå¯¹é½å­—æ®µã€‚å¯ä»¥å°†ä¸‰ä¸ªè‡ªæè¿°å€¼ä½œä¸ºè¯¥å‡½æ•°çš„å‚æ•°ä¼ é€’ï¼š`Blockly.ALIGN_LEFT`ï¼Œ`Blockly.ALIGN_RIGHT` å’Œ `Blockly.ALIGN_CENTRE`ã€‚é»˜è®¤ä¸ºå·¦å¯¹é½ã€‚

---

é…ç½®è¾“å…¥ç»“æŸåï¼Œä½ å¯ä»¥è®¾ç½®å…¶ä»–åŠŸèƒ½ã€‚

å¦‚æœä½ çš„å—è¾“å…¥æ˜¯å¤–æ¥æ ·å¼ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‡½æ•°æ¥å®ç°å†…è”æ ·å¼ï¼š

```javascript
init: function() {
  // ...
  this.setInputsInline(true);
}
```

![inline](https://developers.google.cn/blockly/images/set-inputs-inline.png)

---

å½“ç”¨æˆ·å°†é¼ æ ‡æ‚¬åœåœ¨å—ä¸Šæ—¶ï¼Œå·¥å…·æç¤ºå¯ä»¥æä¾›å³æ—¶å¸®åŠ©ã€‚å¦‚æœæ–‡æœ¬å¾ˆé•¿ï¼Œå®ƒå°†è‡ªåŠ¨æ¢è¡Œã€‚

```javascript
init: function() {
  this.setTooltip("Tooltip text.");
}
```

å½“ç„¶ï¼Œå½“ä½ çš„ä¸€ä¸ªå—éœ€è¦å®ç°å¤šç§åŠŸèƒ½æ—¶ï¼ˆä¾‹å¦‚ä¸‹æ‹‰èœå•é€‰æ‹©+-\*/^ï¼‰ï¼Œå·¥å…·æç¤ºä¹Ÿèƒ½åŠ¨æ€åŠ è½½ã€‚

```javascript
Blockly.Blocks['math_arithmetic'] = {
    init: function () {
        // å°†â€œthisâ€åˆ†é…ç»™ä¸€ä¸ªå˜é‡ï¼Œä»¥ä¾¿åœ¨ä¸‹é¢çš„å·¥å…·æç¤ºé—­åŒ…ä¸­ä½¿ç”¨ã€‚
        var thisBlock = this;
        this.setTooltip(function () {
            var mode = thisBlock.getFieldValue('OP');
            var TOOLTIPS = {
                ADD: Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD,
                MINUS: Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS,
                MULTIPLY: Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY,
                DIVIDE: Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE,
                POWER: Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_POWER
            };
            return TOOLTIPS[mode];
        });
    }
};
```

---

å—å¯ä»¥æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å¸®åŠ©é¡µé¢ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å³é”®èœå•ä¸­é€‰æ‹©â€œå¸®åŠ©â€æ¥ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚å¦‚æœæ­¤å€¼ä¸º`null`ï¼Œåˆ™èœå•æ˜¾ç¤ºä¸ºç°è‰²ã€‚

```javascript
init: function() {
  // ...
  this.setHelpUrl('https://en.wikipedia.org/wiki/For_loop');
}
```

---

å—å¯ä»¥å…·æœ‰ä¾¦å¬å™¨å‡½æ•°ï¼Œå®ƒåœ¨å¯¹å·¥ä½œåŒºçš„ä»»ä½•æ›´æ”¹ï¼ˆåŒ…æ‹¬ä¸å—æ— å…³çš„æ›´æ”¹ï¼‰æ—¶è°ƒç”¨ã€‚å®ƒä»¬ä¸»è¦ç”¨äºè®¾ç½®å—çš„è­¦å‘Šæ–‡æœ¬ï¼Œæˆ–åœ¨å·¥ä½œåŒºå¤–éƒ¨è®¾ç½®ç±»ä¼¼çš„ç”¨æˆ·é€šçŸ¥ã€‚

```javascript
Blockly.Blocks['block_type'] = {
    init: function () {
        // Example validation upon block change:
        this.setOnChange(function (changeEvent) {
            if (this.getInput('NUM').connection.targetBlock()) {
                this.setWarningText(null);
            } else {
                this.setWarningText('Must have an input block.');
            }
        });
    }
};
```

ä¸ºä¿éšœæ•ˆç‡ï¼Œè¯·ä½¿ä½ çš„ä¾¦å¬å™¨å‡½æ•°å°½é‡ç®€æ´ã€‚

---

å¦‚æœä½ çš„å—éœ€è¦æ ¹æ®éœ€æ±‚å¢åŠ æˆ–ç¼©å‡éƒ¨åˆ†ç»“æ„ï¼ˆä¾‹å¦‚ ifâ€¦â€¦elseifâ€¦â€¦elseï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å˜å½¢å™¨ã€‚

![ifâ€¦â€¦elseifâ€¦â€¦else](https://developers.google.cn/blockly/images/if-mutated.png)

å‚è€ƒ blockly[æ‹“å±•å’Œçªå˜ä½“](https://developers.google.cn/blockly/guides/create-custom-blocks/extensions)ã€‚

---

å—è¿˜å¯ä»¥é‡‡ç”¨ä¸€äº›ç‰¹æ®Šæ–¹æ³•è¿›è¡Œé™åˆ¶ï¼Œæ¯”å¦‚ï¼š

- ç¦æ­¢åˆ é™¤ï¼š`this.setDeletable(false);`

  ä½†æ˜¯ä»»æ„å—å¯ä»¥é€šè¿‡ç¨‹åºå¼ºåˆ¶åˆ é™¤ï¼š`block.dispose();`

- ç¦æ­¢ç¼–è¾‘ï¼š`this.setEditable(false);`

- ç¦æ­¢ç§»åŠ¨ï¼š`this.setMovable(false);`

  ä½†æ˜¯ä»»æ„å—å¯ä»¥é€šè¿‡ç¨‹åºå¼ºåˆ¶ç§»åŠ¨ï¼š`block.moveBy(dx, dy);`

- ç¦æ­¢å³é”®èœå•ï¼š`block.contextMenu = false;`

  ä½ ä»å¯ä»¥ç»†åŒ–è¯¥æ“ä½œï¼Œè¯·å‚é˜…[ä¸Šä¸‹æ–‡èœå• API](https://developers.google.cn/blockly/guides/configure/web/context-menus)ã€‚

- ç²˜åˆæ•°æ®ï¼š`this.data = '16dcb3a4-bd39-11e4-8dfc-aa07a5b093db';`

---

### å—è¾“å‡º

å—å¯ä»¥æœ‰è‡³å¤šä¸€ä¸ªè¾“å‡ºï¼š

```javascript
init: function() {
  // ...
  this.setOutput(true, 'Number');
}
```

å¯ä»¥ä¸æŒ‡å®šè¾“å‡ºç±»å‹ï¼š

```javascript
init: function() {
  // ...
  this.setOutput(true);
}
```

å¦‚æœæ²¡æœ‰ï¼Œè¯·è®¾ç½®ä¸ºï¼š

```javascript
init: function() {
  // ...
  this.setOutput(false);
}
```

### å—è¿æ¥

å—æœ‰ä¸¤ä¸ªè¯­å¥è¿æ¥å£ã€‚

`true`è¡¨ç¤ºå­˜åœ¨ï¼Œ`false`è¡¨ç¤ºç¦ç”¨ã€‚

é¡¶ç«¯è¿æ¥å£ï¼š

```javascript
init: function() {
  // ...
  this.setPreviousStatement(true);
}
```

åº•ç«¯è¿æ¥å£ï¼š

```javascript
init: function() {
  // ...
  this.setNextStatement(true);
}
```

å¦‚æœä½ éœ€è¦ï¼Œä½ ä¹Ÿå¯ä»¥åƒå—è¾“å‡ºé‚£æ ·æŒ‡å®šè¿æ¥çš„ç±»å‹ã€‚

```javascript
init: function() {
  // ...
  this.setPreviousStatement(true, 'Action');
  this.setNextStatement(true, 'Action');
}
```

### å—é¢œè‰²

ä½¿ç”¨ä»¥ä¸‹ä»£ç è®¾ç½®å—çš„é¢œè‰²ï¼š

```javascript
init: function() {
  // ...
  this.setColour(160);
}
```

åŸºäº HSV è‰²å½©ç©ºé—´ï¼Œè‰²è¡¨å¦‚ä¸‹ï¼š

![HSV](https://developers.google.cn/blockly/images/hsv.png)

é»˜è®¤æä¾›äº† 9 ç§é¢œè‰²å¸¸é‡ï¼š

```javascript
'%{BKY_LOGIC_HUE}';
'%{BKY_LOOPS_HUE}';
'%{BKY_MATH_HUE}';
'%{BKY_TEXTS_HUE}';
'%{BKY_LISTS_HUE}';
'%{BKY_COLOUR_HUE}';
'%{BKY_VARIABLES_HUE}';
'%{BKY_VARIABLES_DYNAMIC_HUE}';
'%{BKY_PROCEDURES_HUE}';
```

ä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œå®šä¹‰ã€‚

```javascript
// å®šä¹‰é¢œè‰²
Blockly.Msg.EVERYTHING_HUE = 42;
// åœ¨ä½¿ç”¨å—æ—¶æˆ–åœ¨å—å®šä¹‰ä¸­è®¾ç½®é¢œè‰²ï¼š
block.setColour('%{BKY_EVERYTHING_HUE}');
```

## å—ç”Ÿæˆ

å—ç”Ÿæˆæ–‡ä»¶å‚¨å­˜åœ¨`./static/generators/javascript`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶éƒ½å‚¨å­˜ç€ä¸€ä¸ªåŒåå·¥å…·ç®±çš„æ‰€æœ‰å—å®šä¹‰ã€‚

ç¤ºä¾‹3ï¼š

```javascript
Blockly.JavaScript['text_indexOf'] = function(block) {
  // Search the text for a substring.
  var operator = block.getFieldValue('END') == 'FIRST' ? 'indexOf' : 'lastIndexOf';
  var subString = Blockly.JavaScript.valueToCode(block, 'FIND',
      Blockly.JavaScript.ORDER_NONE) || '\'\'';
  var text = Blockly.JavaScript.valueToCode(block, 'VALUE',
      Blockly.JavaScript.ORDER_MEMBER) || '\'\'';
  var code = text + '.' + operator + '(' + subString + ')';
  return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];
};
```

ç”Ÿæˆä»£ç ï¼Œé¦–å…ˆéœ€è¦ä½ çŸ¥é“ä¼ å…¥å‚æ•°å’Œå­—æ®µæ•°æ®ã€‚

`getFieldValue()`å¸®åŠ©ä½ çŸ¥é“æŒ‡å®šåç§°çš„å­—æ®µçš„è¿”å›å€¼ï¼Œä¾‹å¦‚ï¼š

```javascript
block.getFieldValue('END')
```

æ­¤å‡½æ•°ä»æŒ‡å®šåç§°çš„å­—æ®µè¿”å›å€¼ã€‚

- å¯¹äºæ–‡æœ¬å­—æ®µï¼Œæ­¤å‡½æ•°è¿”å›è¾“å…¥çš„æ–‡æœ¬ã€‚ä¾‹å¦‚â€œHello Worldâ€ã€‚

- å¦‚æœæ˜¯ä¸‹æ‹‰èœå•ï¼Œæ­¤å‡½æ•°å°†è¿”å›ä¸æ‰€é€‰é€‰é¡¹å…³è”çš„è¯­è¨€æ— å…³çš„æ–‡æœ¬ã€‚è‹±æ–‡å—å¯èƒ½æœ‰ä¸€ä¸ªä¸‹æ‹‰èœå•ï¼Œå…¶ä¸­é€‰æ‹©äº†â€œfirstâ€ä¸€è¯ï¼Œè€Œå¾·è¯­çš„ç›¸åŒä¸‹æ‹‰èœå•å°†æ˜¾ç¤ºâ€œersteâ€ã€‚ä»£ç ç”Ÿæˆå™¨ä¸å¯èƒ½çŸ¥é“æ‰€æœ‰å¯èƒ½çš„äººç±»è¯­è¨€ï¼Œå› æ­¤è¯¥ getFieldValue å‡½æ•°å°†è¿”å›åˆ›å»ºä¸‹æ‹‰èœå•æ—¶æŒ‡å®šçš„ä¸è¯­è¨€æ— å…³çš„æ–‡æœ¬ï¼ˆBlockly çš„æ ¸å¿ƒå—é€šå¸¸ä½¿ç”¨å¤§å†™è‹±æ–‡å•è¯ï¼Œä¾‹å¦‚ â€œFIRSTâ€ï¼‰ã€‚

- å¯¹äºå˜é‡ä¸‹æ‹‰åˆ—è¡¨ï¼Œæ­¤å‡½æ•°è¿”å›å˜é‡ä¸‹æ‹‰åˆ—è¡¨çš„é¢å‘ç”¨æˆ·çš„åç§°ã€‚è¦æ³¨æ„ï¼Œæ­¤åç§°ä¸å¿…ä¸ç”Ÿæˆçš„ä»£ç ä¸­ä½¿ç”¨çš„å˜é‡åç§°ç›¸åŒã€‚ä¾‹å¦‚ï¼Œå˜é‡åâ€œforâ€åœ¨ Blockly ä¸­æ˜¯åˆæ³•çš„ï¼Œä½†åœ¨å¤§å¤šæ•°è¯­è¨€ä¸­ä¼šä¸ä¿ç•™å­—å†²çªï¼Œå› æ­¤å°†è‡ªåŠ¨é‡å‘½åä¸º â€œfor2â€ã€‚åŒæ ·ï¼Œé˜¿æ‹‰ä¼¯è¯­å˜é‡å â€œÙ…ØªØºÙŠØ±" åœ¨ Blockly ä¸­æ˜¯åˆæ³•çš„ï¼Œä½†åœ¨å¤§å¤šæ•°è¯­è¨€ä¸­éƒ½æ˜¯éæ³•çš„ï¼Œå› æ­¤å°†è‡ªåŠ¨é‡å‘½åä¸º â€œ_D9_85_D8_AA_D8_BA_D9_8A_D8_B1â€ã€‚è¦è·å–ç”Ÿæˆçš„ä»£ç ä¸­å¯èƒ½ä½¿ç”¨çš„ Blockly å˜é‡åç§°ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è°ƒç”¨ï¼š

  ```javascript
    Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);
  ```

`valueToCode()`å¸®åŠ©ä½ çŸ¥é“æŒ‡å®šå€¼è¾“å…¥çš„è½¬æ¢ä¸ºä»£ç åçš„å½¢æ€ã€‚

```javascript
Blockly.JavaScript.valueToCode(block, 'FROM', Blockly.JavaScript.ORDER_ADDITION) || '0'
```

- æ­¤å‡½æ•°æŸ¥æ‰¾è¿æ¥åˆ°å‘½åå€¼è¾“å…¥ï¼ˆ'FROM'ï¼‰çš„å—ï¼Œç”Ÿæˆè¯¥å—çš„ä»£ç ï¼Œç„¶åå°†ä»£ç ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ã€‚åœ¨æœªè¿æ¥è¾“å…¥çš„æƒ…å†µä¸‹ï¼Œæ­¤å‡½æ•°è¿”å› nullï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆé€šå¸¸åœ¨å‡½æ•°ååŠ ä¸Šå¸ƒå°”å€¼â€œæˆ–â€å’Œé»˜è®¤å€¼çš„åŸå› ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰å—é™„åŠ åˆ°åä¸ºâ€œ FROMâ€çš„è¾“å…¥ï¼Œåˆ™æ­¤è¾“å…¥çš„é»˜è®¤ä»£ç å°†ä¸ºå­—ç¬¦ä¸²â€œ0â€ã€‚

- ç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šåµŒå…¥æ‰€éœ€çš„æ“ä½œä¿¡æ¯çš„é¡ºåºã€‚æ¯ä¸ªè¯­è¨€ç”Ÿæˆå™¨éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆé¡ºåºåˆ—è¡¨ã€‚è¯¥ valueToCode åŠŸèƒ½éœ€è¦ä¼ é€’å¯¹åº”äºå°†è¦æ–½åŠ åˆ°æ‰€è¿°è¿”å›ä»£ç çš„æœ€å¤§æƒé‡çš„é¡ºåºå€¼ã€‚valueToCodeå¦‚æœéœ€è¦ï¼Œå¯ä»¥å°†ä»£ç åŒ…è£…åœ¨æ‹¬å·ä¸­ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è¿ç®—ç¬¦ä¼˜å…ˆçº§é¡µé¢ã€‚

- ç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šåµŒå…¥æ‰€éœ€çš„æ“ä½œä¿¡æ¯çš„é¡ºåºã€‚ æ¯ä¸ªè¯­è¨€ç”Ÿæˆå™¨éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆé¡ºåºåˆ—è¡¨ã€‚ éœ€è¦ä¼ é€’ valueToCode å‡½æ•°çš„é¡ºåºå€¼ï¼Œè¯¥é¡ºåºå€¼å¯¹åº”äºå°†åº”ç”¨äºè¿”å›ä»£ç çš„æœ€å¤§ä½œç”¨åŠ›ã€‚ å¦‚æœéœ€è¦ï¼Œè¿™å…è®¸ valueToCode å°†ä»£ç åŒ…è£…åœ¨æ‹¬å·ä¸­ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… è¿ç®—ç¬¦ä¼˜å…ˆçº§ é¡µé¢ã€‚

`statementToCode()`å¸®åŠ©ä½ çŸ¥é“æŒ‡å®šè¯­å¥è¾“å…¥è½¬æ¢ä¸ºä»£ç åçš„å½¢æ€ã€‚

```javascript
Blockly.JavaScript.statementToCode(block, 'DO')
```

- æ­¤å‡½æ•°æŸ¥æ‰¾è¿æ¥åˆ°æŒ‡å®šè¯­å¥è¾“å…¥çš„åµŒå¥—å—å †æ ˆï¼Œä¸ºè¯¥å †æ ˆç”Ÿæˆä»£ç ï¼Œç¼©è¿›ä»£ç ï¼Œç„¶åå°†ä»£ç ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ã€‚ å¦‚æœæœªè¿æ¥è¾“å…¥ï¼Œåˆ™æ­¤å‡½æ•°è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚

ç„¶åï¼Œä½ å¯ä»¥è§£æç”Ÿæˆä»£ç ï¼Œå¹¶å°†å…¶è¿”å›ã€‚

```javascript
var code ='while ('+ argument0 +') {\n'+ branch0 +'}\n';
return code;
```

å¦‚æœä½ çš„å—ä¸ºå€¼å—ï¼ˆæœ‰è¿”å›å€¼ï¼Œä¾‹å¦‚+-*/^ï¼‰ï¼Œåˆ™éœ€è¦ä½ è¿”å›ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå€¼çš„åˆ—è¡¨ï¼šä»£ç å’Œç›¸åº”çš„é¡ºåºå€¼ã€‚

```javascript
var code = argument0 +' '+operator+' '+ argument1;
return [ code , Blockly.JavaScript.ORDER_ADDITION ];
```

æ¯ä¸ªè¯­è¨€ç”Ÿæˆå™¨éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆé¡ºåºåˆ—è¡¨ã€‚ è¿”å›çš„é¡ºåºå€¼å°†æŒ‡å®šä»£ç ç»‘å®šåœ¨ä¸€èµ·çš„ä¼˜å…ˆçº§ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[è¿ç®—ç¬¦ä¼˜å…ˆçº§](https://blockly.tortorse.com/guides/create-custom-blocks/operator-precedence.html)é¡µé¢ã€‚

å¦‚æœç”Ÿæˆçš„ä»£ç è¦æ±‚å°†å­å—çš„ä»£ç åŒ…å«ä¸¤æ¬¡ï¼Œåˆ™åº”[ç¼“å­˜å‚æ•°](https://blockly.tortorse.com/guides/create-custom-blocks/caching-arguments.html)ä»¥æé«˜æ•ˆç‡å¹¶é˜²æ­¢äº§ç”Ÿå‰¯ä½œç”¨ã€‚

## å·¥å…·ç®±

`./static/Waddle/toolBox.xml`

**è¯·ä½¿ç”¨VSCodeæ‰©å±•é‡Œçš„XML Formatterè¿›è¡Œæ ¼å¼åŒ–ï¼Œä¿è¯å¼€å§‹å’Œé—­åˆä¸åœ¨æ ‡ç­¾åŒä¸€è¡Œ**

æ ¼å¼åŒ–åç”¨æ­£åˆ™æ›¿æ¢æ‰€æœ‰

`<field name=["|']TEXT["|']>\n\s+`

ä¸º`<field name="TEXT">`

å¹¶ç”¨æ­£åˆ™æ›¿æ¢æ‰€æœ‰

`</field>`

ä¸º`</field>`

**ä»¥é¿å…å­—ç¬¦ä¸²ç§¯æœ¨å‡ºç°ç©ºç™½å­—ç¬¦**
